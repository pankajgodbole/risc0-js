# risc0-js

## Description

risc0-js is a React app compiled to WASM that serves as a wrapper around a Risc Zero zkVM (risc0) guest.

For our purpose the guest instruction set architecture shall be RISC-V. The code to be proven is a simple Rust program based on the cryptographic Rust library *ring*. 

The zkVM guest program first initializes a password database and saves a password to it. It then confirms that the correct password is accepted whereas a wrong one result in a failure.

Note: the ring crate must include code from PR1574 that contains code to support RISC-V.


## How it Works

The risc0 host program first initializes a prover and then calls upon it to prove the binary image of the zkVM guest. This action results in a receipt of the proof being generated by zkVM. The host program then proceeds to verify that the receipt is valid. A successful verification implies that the generated proof is a valid one.


## Building

```bash
wasm-pack build --target web

# OR

make build_web_js
```

## Running example

```bash
# Go in the example directory to build
cd example
npm install

# This command will build the program and embed the proof data in the frontend public dir
# before starting the frontend.
npm start

# Run this anytime to re-generate the proof while frontend is running
npm run build-program
```

## Testing

```bash
# Test with chrome or any other wasm-pack test target
wasm-pack test --chrome

# Run nodejs tests
make test_js
```

## Usage

```ts
import init, { Receipt } from "risc0-js";

init().then(() => {
	try {
		// Deserialize encoded receipt directly
		Receipt.bincode_deserialize(receipt).validate(method_id);
	} catch (e) {
		// ...
	}
});

```

## Results

Unfortunately, the host process gets killed by the system after running for several minutes.

```bash
ring_app: Finished release [optimized] target(s) in 0.15s
Compiling host v0.1.0 (/home/p/Work/Upwork/Andrew_Cassetti/Code/crypto-risc0/host)
Finished dev [optimized + debuginfo] target(s) in 27.58s
Running target/debug/host
Killed

real 12m31.793s
user 11m36.951s
sys 0m31.383s
```


The process is also killed when run in 'Performance' mode on Ubuntu, just sooner.

```bash
Compiling host v0.1.0 (/home/p/Work/Upwork/Andrew_Cassetti/Code/crypto-risc0/host)
Finished dev [optimized + debuginfo] target(s) in 7.63s
Running target/debug/host
Killed

real 4m25.627s
user 3m35.636s
sys 0m13.150s
```